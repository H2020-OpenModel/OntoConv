version: 1
strategies:
# converting the output of the concrete beam simulation into a file instance
- function: datanode2cuds
  functionType: aiidacuds/datanode2cuds
  configuration:
    names: to_cuds

- function: collection
  functionType: application/vnd.dlite-generate
  configuration:
    driver: json
    location: collection.json
    options: "mode=w"
    store_collection: True

- function: convert_instance
  functionType: application/vnd.dlite-convert
  configuration:
    module_name: ss3_wrappers.abaqus_convert
    function_name: abaqus_converter
    inputs:
      - label: cement_output
    outputs:
      - label: cement_output_instance


# store that instance as an AiiDA data node
- function: cuds2datanode
  functionType: aiidacuds/cuds2datanode
  configuration:
    names: from_cuds

pipelines:
  pipe_abaqus_output_aiida: 'datanode2cuds | convert_instance | cuds2datanode'
